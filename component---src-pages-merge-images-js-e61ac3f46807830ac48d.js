(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{mhLB:function(t,e,n){"use strict";n.r(e);var i=n("kD0k"),r=n.n(i),a=(n("ls82"),n("/S4K")),o=n("t8Zj"),c=n("q1tI"),l=n("XuZe"),d=n("qKvR"),u=n("TJpk"),s=n.n(u),g=n("ctKR"),M=n("tBpk"),h=n.n(M);function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var f={name:"8f7gql",styles:"font-size:1.6rem;text-align:center;margin:1rem 0;@media (min-width:500px){font-size:2rem;margin:2rem 0 1rem 0;}"},m={name:"668gy",styles:"margin:30px 0;display:grid;grid-template-columns:repeat(auto-fit,80px);grid-gap:15px;div{display:flex;width:80px;height:80px;}.image-thumbnail{object-fit:cover;width:80px;height:80px;box-shadow:0 0 3px grey;}.delete-icon{width:20px;height:20px;transform:translate(-10px,-10px);}"},j={name:"1r6ass5",styles:"#input-file{visibility:hidden;width:0px;height:0px;}"},x={name:"1vq581w",styles:"display:block;margin:20px auto;"},b={name:"ryhddn",styles:"font-size:20px;font-weight:bold;box-sizing:border-box;border:1px solid grey;padding:4px 8px;background-color:lightcyan;box-shadow:0 0 3px grey;text-decoration:none;color:black;display:block;text-align:center;width:40%;:active{color:red;text-decoration:none;}"};e.default=function(){var t=Object(c.useState)([]),e=t[0],n=t[1],i="";Object(c.useEffect)((function(){!function(t){var e=window.devicePixelRatio,n=document.getElementById("canvas"),i=n.getContext("2d"),c=t.reduce((function(t,e){return t+e.width}),0),l=t.reduce((function(t,e){return t+e.height}),0),d=Math.max.apply(Math,Object(o.a)(t.map((function(t){return t.width})))),u=Math.max.apply(Math,Object(o.a)(t.map((function(t){return t.height}))));console.log("totalWidth:",c,"totalHeight:",l,"largestWidth:",d,"largestHeight:",u),n.width=d,n.height=l,n.style.width=d/e+"px",n.style.maxWidth="70%",n.style.height=n.height/n.width*n.style.width+"px",i.fillStyle="white",i.fillRect(0,0,n.width,n.height);for(var s,g=function(){var e=s.value,n=e[0],o=e[1],c=o.width,l=o.height,d=t.slice(0,n).reduce((function(t,e){return t+e.height}),0),u=o.width,g=o.height,M=new Image;M.src=o.url,M.onload=Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(M,0,0,c,l,0,d,u,g),i.drawImage(M,0,0,c,l,0,d,u,g);case 2:case"end":return t.stop()}}),t)})))},M=p(t.entries());!(s=M()).done;)g()}(e)}),[e]);var u=function(){var t=Object(a.a)(r.a.mark((function t(e){var i,a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.a)(e.target.files).map((function(t){return URL.createObjectURL(t)})),console.log("files:",i),a=function(t){return new Promise((function(e,n){var i=new Image;i.src=t,i.onload=function(){e({width:+i.width,height:+i.height,url:i.src}),n("出错")}}))},t.next=5,Promise.all(i.map((function(t){return a(t)})));case 5:c=t.sent,n(c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){var i=t.target.dataset.index,r=JSON.parse(JSON.stringify(e));r.splice(i,1),n(r)},y=function(t){i=t.target},w=function(t){var r=t.target;if(r.style.border="none",r.src!==i.src){var a=JSON.parse(JSON.stringify(e)),o=a.map((function(t){return t.url})).indexOf(r.src),c=a.map((function(t){return t.url})).indexOf(i.src),l=a[o];a[o]=a[c],a[c]=l,n(a)}},I=function(t){t.preventDefault()},N=function(t){t.target.style.border="1px solid red"},v=function(t){t.target.style.border="none"};return Object(d.d)(l.a,null,Object(d.d)(s.a,null,Object(d.d)("title",null,"图片拼接 | 长图拼接"),Object(d.d)("meta",{name:"description",content:"图片拼接, 把多张图片合并成一张, 支持纵向或横向拼接, 可以把多张图片拼接成一张长图片, 还能添加水印."})),Object(d.d)("h1",{css:f},"图片拼接 | 长图拼接"),Object(d.d)("section",null,Object(d.d)("div",{css:j},Object(d.d)("label",{htmlFor:"input-file",css:b},"选择图片"),Object(d.d)("input",{id:"input-file",type:"file",onChange:u,multiple:!0,accept:"image/*"})),Object(d.d)("a",{download:!0,onClick:function(){var t=document.getElementById("canvas"),e=document.getElementById("download");if(0===t.width)e.removeAttribute("href");else{var n=t.toDataURL("image/jpeg");e.href=n}},id:"download",css:b},"保存图片"),Object(d.d)("div",{css:m},e.map((function(t,e){return Object(d.d)("div",{key:t.url,draggable:"true",onDragStart:y,onDrop:w,onDragOver:I,onDragEnter:N,onDragLeave:v},Object(d.d)("img",{src:t.url,className:"image-thumbnail"}),Object(d.d)("img",{src:h.a,className:"delete-icon",onClick:M,"data-index":e}))}))),Object(d.d)("canvas",{id:"canvas",css:x,width:"0px",height:"0px"})),Object(d.d)(g.a,{title:"图片拼接",slug:"merge-images/"}))}},tBpk:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB0PSIxNTk2NzkzNTg0MzU0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjQ2OTQiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNTEyIDBDMjI5LjM3NiAwIDAgMjI5LjM3NiAwIDUxMnMyMjkuMzc2IDUxMiA1MTIgNTEyIDUxMi0yMjkuMzc2IDUxMi01MTJTNzk0LjYyNCAwIDUxMiAweiBtMjAyLjI0IDY4My41MmMxMC4yNCAxMC4yNCAxMC4yNCAyNi4xMTIgMCAzNi4zNTJzLTI2LjExMiAxMC4yNC0zNi4zNTIgMGwtMTY3LjkzNi0xNjcuOTM2LTE2Ny40MjQgMTY3LjQyNGMtMTAuMjQgMTAuMjQtMjYuMTEyIDEwLjI0LTM2LjM1MiAwcy0xMC4yNC0yNi4xMTIgMC0zNi4zNTJsMTY3LjQyNC0xNjcuNDI0LTE2OC45Ni0xNjkuOTg0Yy0xMC4yNC0xMC4yNC0xMC4yNC0yNi4xMTIgMC0zNi4zNTJzMjYuMTEyLTEwLjI0IDM2LjM1MiAwbDE2OS40NzIgMTY5LjQ3MiAxNjkuOTg0LTE2OS45ODRjMTAuMjQtMTAuMjQgMjYuMTEyLTEwLjI0IDM2LjM1MiAwczEwLjI0IDI2LjExMiAwIDM2LjM1MmwtMTY5Ljk4NCAxNjkuOTg0IDE2Ny40MjQgMTY4LjQ0OHoiIGZpbGw9IiNDRDI5MkEiIHAtaWQ9IjQ2OTUiPjwvcGF0aD48L3N2Zz4="}}]);
//# sourceMappingURL=component---src-pages-merge-images-js-e61ac3f46807830ac48d.js.map