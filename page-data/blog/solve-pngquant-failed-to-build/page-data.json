{"componentChunkName":"component---src-template-blog-post-template-js","path":"/blog/solve-pngquant-failed-to-build/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>我的网站 kejiweixun.com 是用 gatsbyjs 所写, 今天通过 <code class=\"language-text\">npm update</code> 升级 node packages 时, 终端提示以下错误:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">></span> pngquant-bin@5.0.2 postinstall /Users/to/Documents/kejiweixun.com/node_modules/pngquant-bin\n<span class=\"token operator\">></span> node lib/install.js\n\n  ⚠ <span class=\"token builtin class-name\">read</span> ECONNRESET\n  ⚠ pngquant pre-build <span class=\"token builtin class-name\">test</span> failed\n  ℹ compiling from <span class=\"token builtin class-name\">source</span>\n  ✖ Error: pngquant failed to build, <span class=\"token function\">make</span> sure that libpng is installed\n    at /Users/to/Documents/kejiweixun.com/node_modules/bin-build/node_modules/execa/index.js:231:11\n    at processTicksAndRejections <span class=\"token punctuation\">(</span>internal/process/task_queues.js:97:5<span class=\"token punctuation\">)</span>\n    at async Promise.all <span class=\"token punctuation\">(</span>index <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>如果没记错这个问题我遇到不止一次, 但上一次应该是好几个月之前, 不记得当时怎么解决, 今天再遇到, 又花了大概半小时才找到解决办法, 而且很多人遇到了一样的问题, 所以在这里记录一下以防忘记, 当然这个方法不一定适用于每个人.</p>\n<p>解决办法就是:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">brew <span class=\"token function\">install</span> pkg-config</code></pre></div>\n<p>参考 github 的 issue <a href=\"https://github.com/gatsbyjs/gatsby/issues/20389#issuecomment-650105336\">底部的评论</a>.</p>\n<p>在执行 <code class=\"language-text\">brew install pkg-config</code> 时我又遇到以下错误:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">==</span><span class=\"token operator\">></span> <span class=\"token variable\"><span class=\"token variable\">`</span>brew cleanup<span class=\"token variable\">`</span></span> has not been run <span class=\"token keyword\">in</span> <span class=\"token number\">30</span> days, running now<span class=\"token punctuation\">..</span>.\nError: Permission denied @ apply2files - /usr/local/lib/node_modules/gatsby-cli/node_modules/term-size/vendor/macos/.DS_Store</code></pre></div>\n<p>解决方法是:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">whoami</span><span class=\"token variable\">)</span></span>\"</span>:admin /usr/local/lib</code></pre></div>\n<p>参考资料: <a href=\"https://stackoverflow.com/a/63241724\">出处</a></p>","frontmatter":{"title":"解决 pngquant failed to build, make sure that libpng is installed","date":"2020/08/18","slug":"solve-pngquant-failed-to-build","description":null}}}]}},"pageContext":{"slug":"solve-pngquant-failed-to-build"}},"staticQueryHashes":["1518281631"]}