{"componentChunkName":"component---src-template-blog-post-template-js","path":"/blog/some-really-useful-macos-bash-commands/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>find 命令</h2>\n<p>下面这条命令我经常用, 意思是在 ./src 这个文件夹中查找那些后缀是 js 的文件, 然后把找到的文件一个一个地传递给 egrep 处理, egrep 拿到这些文件之后, 逐一在这些文件中寻找 img 这个字符串, 如果这个文件包含 img 这个字符串, 就返回这个文件的名称. 如果你有很多文件, 不记得某个字符串出现在哪里, 可以用这个命令.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">find</span> ./src -type f -name <span class=\"token string\">'*js'</span> -exec <span class=\"token function\">egrep</span> -l <span class=\"token string\">'img'</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">{} \\;</code> 这一段是固定写法, 也可以写成 <code class=\"language-text\">{} \\+</code>, 但<a href=\"https://stackoverflow.com/questions/6085156/using-semicolon-vs-plus-with-exec-in-find\">有区别</a>, 似乎通常用 <code class=\"language-text\">;</code>.</p>\n<p>如果删了 <code class=\"language-text\">-l</code>, 那返回的不是文件的名称, 而是包含 img 这个字符串的那整行字符串, 例如返回:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>logo<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>kejiweixun logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>find 可以撘配其他命令使用, 例如可以把 egrep 更换为 ls, 下面这条命令把 src 文件夹中所有 js 文件找出来, 然后通过 ls 显示这些文件的大小, 路径, 读写权限等信息:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">find</span> ./src -name <span class=\"token string\">'*.js'</span> -type f -exec <span class=\"token function\">ls</span> -lh <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>再比如下面这条命令, 找到所有 js 文件, 然后用 sed 把这些文件中的 jpg 替换成 webp:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">find</span> <span class=\"token builtin class-name\">.</span> -type f -name <span class=\"token string\">'*.js'</span> -exec <span class=\"token function\">sed</span> -i <span class=\"token string\">''</span> -e <span class=\"token string\">'s/\\(\\.jpg\\)/<span class=\"token entity\" title=\"\\1\">\\1</span>\\.webp/'</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>常用终端快捷键</h2>\n<p>如何重复执行上一条命令？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">!!</code></pre></div>\n<p>如何中断操作？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">command . //相当于 `control c`</code></pre></div>\n<p>如何拆分成两个面板？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">command d</code></pre></div>\n<p>取消拆分:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">command shift d</code></pre></div>\n<p>如何移动光标在命令行中的位置？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">control a  //移动到开头\ncontrol e  //移动到行尾\ncontrol b  //往后移动一个字母的位置\ncontrol f  //往前移动一个字母的位置</code></pre></div>\n<p>以及如何抹掉内容？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">control u  /抹到开头\ncontrol k  //抹到结尾\ncontrol w  //从光标往回删除当前单词;</code></pre></div>\n<p>如何清除命令行?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">command l\ncommand k\nclear</code></pre></div>\n<h2>其他常用 bash 命令</h2>\n<p>在当前目录、上一级目录之间如何切换？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> -</code></pre></div>\n<p>显示当前目录所有子目录及其文件？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ls</span> -R\ntree <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">find</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>如何创建子文件夹？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">kdir -p dir/dir</code></pre></div>\n<p>如何在 terminal 使用 spotlight 搜索？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mdfind <span class=\"token punctuation\">[</span>search_pattern<span class=\"token punctuation\">]</span>\nmdfind -onlyin <span class=\"token punctuation\">[</span>dir<span class=\"token punctuation\">]</span> -name <span class=\"token punctuation\">[</span>pattern<span class=\"token punctuation\">]</span></code></pre></div>\n<p>terminal 如何打开当前目录的文件夹？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">open</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>一个方便的图片处理工具?</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">sips -Z 100x100 image.jpg</code></pre></div>\n<p>如何用 egrep 对目录及其所有子目录进行查找？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">egrep</span> -r <span class=\"token string\">'pattern'</span> <span class=\"token function\">dir</span></code></pre></div>\n<p>egrep 如何显示匹配到的具体字符？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">echo</span> apple <span class=\"token operator\">|</span> <span class=\"token function\">egrep</span> <span class=\"token string\">'pattern'</span> --color<span class=\"token operator\">=</span>always\n<span class=\"token builtin class-name\">echo</span> apple <span class=\"token operator\">|</span> <span class=\"token function\">egrep</span> <span class=\"token string\">'pattern'</span> -o</code></pre></div>\n<p>如何删除文档的重复行？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sort</span> -u file.txt</code></pre></div>\n<p>如何用命令行创建替身？</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ln</span> -s ~/Documents/project/ ~/Desktop/</code></pre></div>\n<p>如何把文字, 文件变成 base64 ?</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">base64 -in 文件 -out 文件\nbase64 -in 文件 <span class=\"token operator\">|</span> pbcopy  //顺便复制到剪切板\nbase64 -d -in 文件  //解密</code></pre></div>\n<p>如何把一个文件复制剪到切板?</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pbcopy <span class=\"token operator\">&lt;</span> a.txt</code></pre></div>\n<p>传输文件到服务器的方法:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">scp</span> <span class=\"token punctuation\">[</span>本地文件<span class=\"token punctuation\">]</span> userName@ip地址:<span class=\"token punctuation\">[</span>目录<span class=\"token punctuation\">]</span>  //scp 是 Secure Copy Protocol 的简称</code></pre></div>","frontmatter":{"title":"一些超好用的 macOS bash 命令","date":"2019/10/30","slug":"some-really-useful-macos-bash-commands","description":"find 命令如何搭配其他命令使用? 如何重复执行上一条命令? 如何中断正在运行中的任务? 如何转换成 bash64 编码?"}}}]}},"pageContext":{"slug":"some-really-useful-macos-bash-commands"}},"staticQueryHashes":["1518281631"]}