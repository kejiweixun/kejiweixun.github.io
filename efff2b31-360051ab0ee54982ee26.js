(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{iOEY:function(e,t,o){"use strict";o.r(t);var r=o("KQm4"),n=o("q1tI"),i=o("XuZe"),a=o("qKvR"),l=o("qhky"),s=o("ctKR"),c=o("9/5/"),g=o.n(c),h=o("oN6q"),d=o.n(h),b=o("Wu4X"),u=o.n(b),v=o("CEGK"),m=o.n(v),x=o("wUTo"),f=o.n(x),y=o("M69q"),p=o.n(y),k=o("QijW"),T=o.n(k),w=o("dKps"),S=o.n(w),O=o("+7iz"),W=o.n(O),D=o("tBOp"),j=o.n(D),M=o("OvfL"),C=o.n(M),R=o("hQ0j"),A=o.n(R),N=o("CFdT"),P=o.n(N),U=o("W8sa"),I=o.n(U),_=o("gUam"),z=o.n(_),L=o("1GiG"),B=o.n(L),J=o("E+iA"),K=o.n(J),E=o("GavH"),q=o.n(E),X=o("4avP"),Y=o.n(X),G=o("vQik"),F=o.n(G),Q=o("iJFh"),V=o.n(Q),H=o("RHWq"),Z=o.n(H),$=o("GqUX"),ee=o.n($),te=o("G3vT"),oe=o.n(te),re=o("z4Oh"),ne=o.n(re),ie=o("9wrx"),ae=o.n(ie),le=o("Xhgi"),se=o.n(le);function ce(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return ge(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var he=["transparent","rgba(210,77,87,1)","rgba(242,38,19,1)","rgba(217,30,24,1)","rgba(150,40,27,1)","rgba(239,72,54,1)","rgba(214,69,65,1)","rgba(192,57,43,1)","rgba(207,0,15,1)","rgba(231,76,60,1)","rgba(219,10,91,1)","rgba(246,71,71,1)","rgba(241,169,160,1)","rgba(210,82,127,1)","rgba(224,130,131,1)","rgba(246,36,89,1)","rgba(226,106,106,1)","rgba(220,198,224,1)","rgba(102,51,153,1)","rgba(103,65,114,1)","rgba(174,168,211,1)","rgba(145,61,136,1)","rgba(154,18,179,1)","rgba(191,85,236,1)","rgba(190,144,212,1)","rgba(142,68,173,1)","rgba(155,89,182,1)","rgba(68,108,179,1)","rgba(228,241,254,1)","rgba(65,131,215,1)","rgba(89,171,227,1)","rgba(129,207,224,1)","rgba(82,179,217,1)","rgba(197,239,247,1)","rgba(34,167,240,1)","rgba(52,152,219,1)","rgba(44,62,80,1)","rgba(25,181,254,1)","rgba(51,110,123,1)","rgba(34,49,63,1)","rgba(107,185,240,1)","rgba(30,139,195,1)","rgba(58,83,155,1)","rgba(52,73,94,1)","rgba(103,128,159,1)","rgba(37,116,169,1)","rgba(31,58,147,1)","rgba(137,196,244,1)","rgba(75,119,190,1)","rgba(92,151,191,1)","rgba(78,205,196,1)","rgba(162,222,208,1)","rgba(135,211,124,1)","rgba(144,198,149,1)","rgba(38,166,91,1)","rgba(3,201,169,1)","rgba(104,195,163,1)","rgba(101,198,187,1)","rgba(27,188,155,1)","rgba(27,163,156,1)","rgba(102,204,153,1)","rgba(54,215,183,1)","rgba(200,247,197,1)","rgba(134,226,213,1)","rgba(46,204,113,1)","rgba(22,160,133,1)","rgba(63,195,128,1)","rgba(1,152,117,1)","rgba(3,166,120,1)","rgba(77,175,124,1)","rgba(42,187,155,1)","rgba(0,177,106,1)","rgba(30,130,76,1)","rgba(4,147,114,1)","rgba(38,194,129,1)","rgba(253,227,167,1)","rgba(248,148,6,1)","rgba(235,149,50,1)","rgba(232,126,4,1)","rgba(244,179,80,1)","rgba(242,120,75,1)","rgba(235,151,78,1)","rgba(245,171,53,1)","rgba(211,84,0,1)","rgba(243,156,18,1)","rgba(249,105,14,1)","rgba(249,191,59,1)","rgba(242,121,53,1)","rgba(230,126,34,1)","rgba(236,236,236,1)","rgba(108,122,137,1)","rgba(210,215,211,1)","rgba(238,238,238,1)","rgba(189,195,199,1)","rgba(236,240,241,1)","rgba(149,165,166,1)","rgba(218,223,225,1)","rgba(171,183,183,1)","rgba(242,241,239,1)","rgba(191,191,191,1)","rgba(230,226,175,1)","rgba(167,163,126,1)","rgba(239,236,202,1)","rgba(4,99,128,1)","rgba(0,47,47,1)","rgba(70,137,102,1)","rgba(255,240,165,1)","rgba(255,176,59,1)","rgba(182,73,38,1)","rgba(142,40,0,1)","rgba(30,30,32,1)"],de=["rgba(189,195,199,1)","rgba(255,176,59,1)","rgba(191,85,236,1)","rgba(242,38,19,1)","rgba(0,0,0,1)"],be={name:"k4moad",styles:"font-size:clamp(1.3rem,1vw + 1.3rem,1.8rem);text-align:center;margin:1em 0;"},ue={name:"1m7exxs",styles:"#canvasContainer{width:100%;max-height:500px;overflow:scroll;display:grid;place-items:center;margin-top:50px;canvas{box-shadow:0 0 3px grey;}.scroll-div{overflow:scroll;max-height:500px;max-width:100%;::-webkit-scrollbar{-webkit-appearance:none;}::-webkit-scrollbar:horizontal{height:11px;}::-webkit-scrollbar:vertical{width:11px;}::-webkit-scrollbar-thumb{border-radius:8px;border:2px solid white;background-color:rgba(0,0,0,.5);}}}.image-info{font-size:0.8rem;text-align:center;margin:0 auto 1em auto;}"},ve={name:"sux1rn",styles:"display:grid;grid-template-columns:100%;grid-gap:15px;"},me={name:"17slvjb",styles:"display:grid;grid-template-columns:1fr 1fr;margin:30px 0;place-items:center;font-weight:bold;.chooseImageBtn{label input{width:0;height:0;opacity:0;position:absolute;}label span{cursor:pointer;}}.saveImageBtn a{text-decoration:none;color:black;}.button{font-size:1.3rem;background-color:lightcyan;padding:0.2em 0.4em;border:1px solid grey;border-radius:0.2em;box-shadow:0 0 3px grey;transition:220ms all ease-in-out;:hover{background-color:wheat;}input:focus + span{border:2px solid black;border-radius:0.2em;}}"},xe={name:"pr5vnj",styles:"display:flex;p{font-size:1.2rem;margin:0.5em 0.5em 0.5em 0;flex-shrink:0;}textarea{font-size:1.2rem;flex:1;max-width:50%;padding:0 0.4em;margin:auto 0;height:3em;line-height:1.5;vertical-align:middle;}"},fe={name:"12mu0gv",styles:"display:flex;p{font-size:1.2rem;margin:0.5em 0.5em 0.5em 0;flex-shrink:0;}input{flex:1;max-width:50%;}"},ye={name:"k008qs",styles:"display:flex;"},pe={name:"1w546sa",styles:"font-size:1.2rem;line-height:1.1em;width:1.6em;height:1.6em;border-radius:10%;font-weight:bold;box-shadow:0 0 3px grey;margin:0.2em;padding:0.25em;text-align:center;vertical-align:middle;cursor:pointer;:active{background-color:wheat;}"},ke={name:"1d7v61f",styles:"font-size:1.2rem;line-height:1.1em;width:1.6em;height:1.6em;border-radius:10%;font-weight:bold;box-shadow:0 0 3px grey;margin:0.2em;padding:0.25em;text-align:center;vertical-align:middle;cursor:pointer;background-color:wheat;"},Te={name:"hzqqug",styles:"display:grid;grid-template-columns:100%;grid-gap:1em;p{font-size:1.2rem;margin:0.2em 0;}.opacityAndLineWidth{margin:0.8em 0;display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));div{margin-right:20px;display:flex;p{flex-shrink:0;}input{flex:1;}}}.color-grid{display:grid;grid-template-columns:repeat(auto-fit,1.5rem);grid-gap:1px;.one-color{height:1.5rem;width:1.5rem;color:white;text-align:center;text-shadow:#000 1px 0 3px;}.more-color{grid-column-end:span 3;height:1.5rem;line-height:1.5em;vertical-align:middle;text-align:center;background-color:wheat;}}"},we=[[{setting:"rotateAngle",icon:Z.a,value:"rotateRight",belongTo:"all"},{setting:"rotateAngle",icon:ee.a,value:"rotateLeft",belongTo:"all"}],[{setting:"tileStyle.marginX",icon:K.a,value:"marginX_less",belongTo:"tile"},{setting:"tileStyle.marginX",icon:q.a,value:"marginX_more",belongTo:"tile"},{setting:"tileStyle.marginY",icon:Y.a,value:"marginY_less",belongTo:"tile"},{setting:"tileStyle.marginY",icon:F.a,value:"marginY_more",belongTo:"tile"}],[{setting:"singleStyle.position",icon:oe.a,value:"top_left",belongTo:"single"},{setting:"singleStyle.position",icon:ne.a,value:"top_right",belongTo:"single"},{setting:"singleStyle.position",icon:T.a,value:"center",belongTo:"single"},{setting:"singleStyle.position",icon:p.a,value:"bottom_right",belongTo:"single"},{setting:"singleStyle.position",icon:f.a,value:"bottom_left",belongTo:"single"}],[{setting:"curvedStyle.curvedMargin",icon:Y.a,value:"curvedMargin_less",belongTo:"curved"},{setting:"curvedStyle.curvedMargin",icon:F.a,value:"curvedMargin_more",belongTo:"curved"},{setting:"curvedStyle.curvedAngle",icon:j.a,value:"curvedAngle_less",belongTo:"curved"},{setting:"curvedStyle.curvedAngle",icon:C.a,value:"curvedAngle_more",belongTo:"curved"},{setting:"curvedStyle.curvedRadius",icon:A.a,value:"curvedRadius_less",belongTo:"curved"},{setting:"curvedStyle.curvedRadius",icon:P.a,value:"curvedRadius_more",belongTo:"curved"}],[{setting:"font.fontWeight",icon:u.a,value:"fontWeight",belongTo:"all"},{setting:"font.fontStyle",icon:z.a,value:"fontStyle",belongTo:"all"},{setting:"textDecorationOver.show",icon:V.a,value:"overline",belongTo:"all"},{setting:"textDecorationThrough.show",icon:B.a,value:"line_through",belongTo:"all"},{setting:"textDecorationUnder.show",icon:se.a,value:"underline",belongTo:"all"}],[{setting:"background.show",icon:d.a,value:"background",belongTo:"tile_single"},{setting:"border.show",icon:m.a,value:"border",belongTo:"tile_single"},{setting:"fontStroke.show",icon:I.a,value:"fontStroke",belongTo:"all"},{setting:"crossLineTen.show",icon:W.a,value:"crossLineTen",belongTo:"all"},{setting:"crossLineCross.show",icon:S.a,value:"crossLineCross",belongTo:"all"}]],Se=[{setting:"font",name:"水印颜色",showAllColors:!1},{setting:"textDecorationOver",name:"上横线",showAllColors:!1},{setting:"textDecorationThrough",name:"中横线",showAllColors:!1},{setting:"textDecorationUnder",name:"下横线",showAllColors:!1},{setting:"background",name:"背景",showAllColors:!1},{setting:"border",name:"边框",showAllColors:!1},{setting:"fontStroke",name:"描边",showAllColors:!1},{setting:"crossLineTen",name:"十字线",showAllColors:!1},{setting:"crossLineCross",name:"交叉线",showAllColors:!1}],Oe={watermarkText:[],symbol:"",rotateAngle:45,style:"tile",tileStyle:{marginX:0,marginY:0},singleStyle:{position:"center"},curvedStyle:{curvedRadius:200,curvedAngle:180,curvedMargin:0},font:{fontStyle:"normal",fontWeight:"normal",fontSize:100,color:"rgba(242,38,19,0.6)",opacity:.6},textDecorationOver:{show:!1,lineWidth:3,color:"rgba(34,167,240,0.5)",opacity:.5},textDecorationThrough:{show:!1,lineWidth:3,color:"rgba(34,167,240,0.5)",opacity:.5},textDecorationUnder:{show:!1,lineWidth:3,color:"rgba(34,167,240,0.5)",opacity:.5},fontStroke:{show:!1,lineWidth:3,color:"rgba(0,0,0,0.5)",opacity:.5},background:{show:!1,color:"rgba(255,176,59,0.2)",opacity:.2},border:{show:!1,lineWidth:3,color:"rgba(191,85,236,0.5)",opacity:.5},crossLineTen:{show:!1,lineWidth:5,color:"rgba(242,38,19,0.5)",opacity:.5},crossLineCross:{show:!1,lineWidth:5,color:"rgba(242,38,19,0.5)",opacity:.5}};t.default=function(){var e=Object(n.useState)({width:0,height:0,size:0}),t=e[0],o=e[1],c=Object(n.useState)(JSON.parse(JSON.stringify(Oe))),h=c[0],d=c[1],b=Object(n.useState)(JSON.parse(JSON.stringify(Se))),u=b[0],v=b[1],m=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),o=h.watermarkText.length?h.watermarkText:["办理xx专用,它用无效"];o=o.map((function(e,t){return 0===t?h.symbol+e:e}));var n=h.font.fontSize||1;if(t.font=h.font.fontStyle+" "+h.font.fontWeight+" "+h.font.fontSize+"px sans-serif","tile"===h.style){var i=h.tileStyle.marginX,a=h.tileStyle.marginY;t.save(),t.fillStyle=h.font.color,t.textAlign="center",t.textBaseline="middle",t.translate(Math.round(e.width/2),Math.round(e.height/2)),t.rotate(h.rotateAngle*Math.PI/180);var l=Math.sqrt(e.width/2*e.width/2+e.height/2*e.height/2),s=Math.max.apply(Math,Object(r.a)(o.map((function(e){return t.measureText(e).width}))));o.forEach((function(e,r){for(var c=0-n/2*(o.length-1)+n*r,g=t.measureText(e).width>2*l?2*l:t.measureText(e).width,d=0;d<l;d=d+1*s+2*n+i)for(var b=c;b<l;b=b+n*(2+o.length)+a)h.background.show&&(t.save(),t.fillStyle=h.background.color,0===d&&b===c?t.fillRect(d-g/2,b-n/2,g,n):0===d&&b!==c?(t.fillRect(d-g/2,b-n/2,g,n),t.fillRect(d-g/2,-b-n/2,g,n)):0!==d&&b===c?(t.fillRect(d-g/2,b-n/2,g,n),t.fillRect(-d-g/2,b-n/2,g,n)):(t.fillRect(d-g/2,b-n/2,g,n),t.fillRect(-d-g/2,-b-n/2,g,n),t.fillRect(-d-g/2,b-n/2,g,n),t.fillRect(d-g/2,-b-n/2,g,n)),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,0===d&&b===c?t.strokeText(e,d,b,2*l):0===d&&b!==c?(t.strokeText(e,d,b,2*l),t.strokeText(e,d,-b,2*l)):0!==d&&b===c?(t.strokeText(e,d,b,2*l),t.strokeText(e,-d,b,2*l)):(t.strokeText(e,d,b,2*l),t.strokeText(e,-d,b,2*l),t.strokeText(e,d,-b,2*l),t.strokeText(e,-d,-b,2*l)),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,0===d&&b===c?t.strokeRect(d-g/2,b-n/2,g,n):0===d&&b!==c?(t.strokeRect(d-g/2,b-n/2,g,n),t.strokeRect(d-g/2,-b-n/2,g,n)):0!==d&&b===c?(t.strokeRect(d-g/2,b-n/2,g,n),t.strokeRect(-d-g/2,b-n/2,g,n)):(t.strokeRect(d-g/2,b-n/2,g,n),t.strokeRect(d-g/2,-b-n/2,g,n),t.strokeRect(-d-g/2,b-n/2,g,n),t.strokeRect(-d-g/2,-b-n/2,g,n)),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),0===d&&b===c?(t.moveTo(d-g/2,b-n/2),t.lineTo(d+g/2,b-n/2)):0===d&&b!==c?(t.moveTo(d-g/2,b-n/2),t.lineTo(d+g/2,b-n/2),t.moveTo(d-g/2,-b-n/2),t.lineTo(d+g/2,-b-n/2)):0!==d&&b===c?(t.moveTo(d-g/2,b-n/2),t.lineTo(d+g/2,b-n/2),t.moveTo(-d-g/2,b-n/2),t.lineTo(g/2-d,b-n/2)):(t.moveTo(d-g/2,b-n/2),t.lineTo(d+g/2,b-n/2),t.moveTo(-d-g/2,-b-n/2),t.lineTo(g/2-d,-b-n/2),t.moveTo(d-g/2,-b-n/2),t.lineTo(d+g/2,-b-n/2),t.moveTo(-d-g/2,b-n/2),t.lineTo(g/2-d,b-n/2)),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),0===d&&b===c?(t.moveTo(d-g/2,b),t.lineTo(d+g/2,b)):0===d&&b!==c?(t.moveTo(d-g/2,b),t.lineTo(d+g/2,b),t.moveTo(d-g/2,-b),t.lineTo(d+g/2,-b)):0!==d&&b===c?(t.moveTo(d-g/2,b),t.lineTo(d+g/2,b),t.moveTo(-d-g/2,b),t.lineTo(g/2-d,b)):(t.moveTo(d-g/2,b),t.lineTo(d+g/2,b),t.moveTo(d-g/2,-b),t.lineTo(d+g/2,-b),t.moveTo(-d-g/2,b),t.lineTo(g/2-d,b),t.moveTo(-d-g/2,-b),t.lineTo(g/2-d,-b)),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),0===d&&b===c?(t.moveTo(d-g/2,b+n/2),t.lineTo(d+g/2,b+n/2)):0===d&&b!==c?(t.moveTo(d-g/2,b+n/2),t.lineTo(d+g/2,b+n/2),t.moveTo(d-g/2,n/2-b),t.lineTo(d+g/2,n/2-b)):0!==d&&b===c?(t.moveTo(d-g/2,b+n/2),t.lineTo(d+g/2,b+n/2),t.moveTo(-d-g/2,b+n/2),t.lineTo(g/2-d,b+n/2)):(t.moveTo(d-g/2,b+n/2),t.lineTo(d+g/2,b+n/2),t.moveTo(-d-g/2,b+n/2),t.lineTo(g/2-d,b+n/2),t.moveTo(d-g/2,n/2-b),t.lineTo(d+g/2,n/2-b),t.moveTo(-d-g/2,n/2-b),t.lineTo(g/2-d,n/2-b)),t.stroke(),t.restore()),0===d&&b===c?t.fillText(e,d,b,2*l):0===d&&b!==c?(t.fillText(e,d,b,2*l),t.fillText(e,d,-b,2*l)):0!==d&&b===c?(t.fillText(e,d,b,2*l),t.fillText(e,-d,b,2*l)):(t.fillText(e,d,b,2*l),t.fillText(e,-d,b,2*l),t.fillText(e,d,-b,2*l),t.fillText(e,-d,-b,2*l))})),t.restore()}else if("single"===h.style){t.save(),t.fillStyle=h.font.color;var c=Math.sqrt(e.width/2*e.width/2+e.height/2*e.height/2);o.forEach((function(r,i){var a=t.measureText(r).width>2*c?2*c:t.measureText(r).width,l=[];switch(h.singleStyle.position){case"center":t.save(),t.translate(Math.round(e.width/2),Math.round(e.height/2)),t.rotate(h.rotateAngle*Math.PI/180),t.textAlign="center",t.textBaseline="middle";var s=0-n/2*(o.length-1)+n*i;l.push([0-a/2,s-n/2],[0+a/2,s-n/2],[0-a/2,s+n/2],[0+a/2,s+n/2]),h.background.show&&(t.save(),t.fillStyle=h.background.color,t.fillRect(l[0][0],l[0][1],a,n),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,t.strokeText(r,0,s,a),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]),t.lineTo(l[1][0],l[1][1]),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]+n/2),t.lineTo(l[1][0],l[1][1]+n/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.moveTo(l[3][0],l[3][1]),t.lineTo(l[2][0],l[2][1]),t.stroke(),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,t.strokeRect(l[0][0],l[0][1],a,n),t.restore()),t.fillText(r,0,s,a),t.restore();break;case"top_left":t.save(),t.textAlign="left",t.textBaseline="top";var g=h.border.show?h.border.lineWidth/2:0,d=h.textDecorationOver.show?h.textDecorationOver.lineWidth/2:0,b=0+g,u=0+n*i+Math.max(g,d);l.push([0+g,n*i+Math.max(g,d)],[a+g,n*i+Math.max(g,d)],[a+g,n*(i+1)+Math.max(g,d)],[0+g,n*(i+1)+Math.max(g,d)]),h.background.show&&(t.save(),t.fillStyle=h.background.color,t.fillRect(l[0][0],l[0][1],a,n),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,t.strokeText(r,b,u,a),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]),t.lineTo(l[1][0],l[1][1]),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]+n/2),t.lineTo(l[1][0],l[1][1]+n/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.moveTo(l[3][0],l[3][1]),t.lineTo(l[2][0],l[2][1]),t.stroke(),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,t.strokeRect(l[0][0],l[0][1],a,n),t.restore()),t.fillText(r,b,u,a),t.restore();break;case"top_right":t.save(),t.translate(e.width,0),t.textAlign="left",t.textBaseline="top";var v=h.border.show?h.border.lineWidth/2:0,m=h.textDecorationOver.show?h.textDecorationOver.lineWidth/2:0,x=-a-v,f=0+n*i+Math.max(v,m);l.push([-a-v,n*i+Math.max(v,m)],[0-v,n*i+Math.max(v,m)],[0-v,n*(i+1)+Math.max(v,m)],[-a-v,n*(i+1)+Math.max(v,m)]),h.background.show&&(t.save(),t.fillStyle=h.background.color,t.fillRect(l[0][0],l[0][1],a,n),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,t.strokeText(r,x,f,a),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]),t.lineTo(l[1][0],l[1][1]),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]+n/2),t.lineTo(l[1][0],l[1][1]+n/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.moveTo(l[3][0],l[3][1]),t.lineTo(l[2][0],l[2][1]),t.stroke(),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,t.strokeRect(l[0][0],l[0][1],a,n),t.restore()),t.fillText(r,x,f,a),t.restore();break;case"bottom_right":t.save(),t.translate(e.width,e.height),t.textAlign="left",t.textBaseline="top";var y=h.border.show?h.border.lineWidth/2:0,p=h.textDecorationUnder.show?h.textDecorationUnder.lineWidth/2:0,k=-a-y,T=-n*o.length+n*i-Math.max(y,p);l.push([-a-y,-n*o.length+n*i-Math.max(y,p)],[0-y,-n*o.length+n*i-Math.max(y,p)],[0-y,-n*(o.length-1)+n*i-Math.max(y,p)],[-a-y,-n*(o.length-1)+n*i-Math.max(y,p)]),h.background.show&&(t.save(),t.fillStyle=h.background.color,t.fillRect(l[0][0],l[0][1],a,n),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,t.strokeText(r,k,T,a),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]),t.lineTo(l[1][0],l[1][1]),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]+n/2),t.lineTo(l[1][0],l[1][1]+n/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.moveTo(l[3][0],l[3][1]),t.lineTo(l[2][0],l[2][1]),t.stroke(),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,t.strokeRect(l[0][0],l[0][1],a,n),t.restore()),t.fillText(r,k,T,a),t.restore();break;case"bottom_left":t.save(),t.translate(0,e.height),t.textAlign="left",t.textBaseline="top";var w=h.border.show?h.border.lineWidth/2:0,S=h.textDecorationUnder.show?h.textDecorationUnder.lineWidth/2:0,O=0+w,W=-n*o.length+n*i-Math.max(w,S);l.push([0+w,-n*o.length+n*i-Math.max(w,S)],[a+w,-n*o.length+n*i-Math.max(w,S)],[a+w,-n*(o.length-1)+n*i-Math.max(w,S)],[0+w,-n*(o.length-1)+n*i-Math.max(w,S)]),h.background.show&&(t.save(),t.fillStyle=h.background.color,t.fillRect(l[0][0],l[0][1],a,n),t.restore()),h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,t.strokeText(r,O,W,a),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]),t.lineTo(l[1][0],l[1][1]),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.moveTo(l[0][0],l[0][1]+n/2),t.lineTo(l[1][0],l[1][1]+n/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.moveTo(l[3][0],l[3][1]),t.lineTo(l[2][0],l[2][1]),t.stroke(),t.restore()),h.border.show&&(t.save(),t.strokeStyle=h.border.color,t.lineWidth=h.border.lineWidth,t.strokeRect(l[0][0],l[0][1],a,n),t.restore()),t.fillText(r,O,W,a),t.restore()}})),t.restore()}else if("curved"===h.style){t.save(),t.fillStyle=h.font.color;var g=h.curvedStyle.curvedRadius,d=h.curvedStyle.curvedAngle*Math.PI/180,b=h.rotateAngle*Math.PI/180,u=Math.round(e.width/2),v=Math.round(e.height/2),m=function(e,t,o,r,n,i,a,l){t.save(),t.translate(r,n),t.rotate(-1*(a-l)/2),t.rotate(a/o.length*-1);for(var s=0;s<o.length;s++){t.rotate(a/o.length),t.save(),t.translate(0,-1*i);var c=o[s];"strokeText"===e?t.strokeText(c,0,0):t.fillText(c,0,0),t.restore()}t.restore()};o.forEach((function(e,o){h.fontStroke.show&&(t.save(),t.strokeStyle=h.fontStroke.color,t.lineWidth=h.fontStroke.lineWidth,m("strokeText",t,e,u,v,g-o*n*1.2,d,b),t.restore()),h.textDecorationOver.show&&(t.save(),t.strokeStyle=h.textDecorationOver.color,t.lineWidth=h.textDecorationOver.lineWidth,t.beginPath(),t.arc(u,v,g+n-o*n*1.2,-(Math.PI+d-b)/2,(d+b-Math.PI)/2),t.stroke(),t.restore()),h.textDecorationThrough.show&&(t.save(),t.strokeStyle=h.textDecorationThrough.color,t.lineWidth=h.textDecorationThrough.lineWidth,t.beginPath(),t.arc(u,v,g+n/2-o*n*1.2,-(Math.PI+d-b)/2,(d+b-Math.PI)/2),t.stroke(),t.restore()),h.textDecorationUnder.show&&(t.save(),t.strokeStyle=h.textDecorationUnder.color,t.lineWidth=h.textDecorationUnder.lineWidth,t.beginPath(),t.arc(u,v,g-o*n*1.2,-(Math.PI+d-b)/2,(d+b-Math.PI)/2),t.stroke(),t.restore()),m("fillText",t,e,u,v,g-o*n*1.2,d,b)})),t.restore()}h.crossLineTen.show&&(t.save(),t.strokeStyle=h.crossLineTen.color,t.lineWidth=h.crossLineTen.lineWidth,t.beginPath(),t.moveTo(e.width/2,0),t.lineTo(e.width/2,e.height),t.moveTo(0,e.height/2),t.lineTo(e.width,e.height/2),t.stroke(),t.restore()),h.crossLineCross.show&&(t.save(),t.strokeStyle=h.crossLineCross.color,t.lineWidth=h.crossLineCross.lineWidth,t.beginPath(),t.moveTo(0,0),t.lineTo(e.width,e.height),t.moveTo(e.width,0),t.lineTo(0,e.height),t.stroke(),t.restore())},x=Object(n.useCallback)(g()((function(e){var t=e.target.value,o=JSON.parse(JSON.stringify(h));o.watermarkText=t.split(/\n|\r/g),d(o)}),250),[h]),f=Object(n.useCallback)(g()((function(e,t){var o=t.split("."),r=JSON.parse(JSON.stringify(h));2===o.length?(r[o[0]][o[1]]=e,"opacity"===o[1]&&(r[o[0]].color=r[o[0]].color.replace(/[^,]+(?=\))/g,e))):3===o.length&&(r[o[0]][o[1]][o[2]]=e),d(r)}),250),[h]),y=function(e){var t=e.target.value,o=e.target.name;f(Number(t),o)},p=function(e){var t=e.target.dataset.value,o=e.target.dataset.setting,r=JSON.parse(JSON.stringify(h)),n=t.replace(/[^,]+(?=\))/g,r[o].opacity);r[o].color=n,d(r);for(var i,a=JSON.parse(JSON.stringify(u)),l=ce(u.entries());!(i=l()).done;){var s=i.value,c=s[0];o!==s[1].setting&&(a[c].showAllColors=!1)}v(a)},k=function(e){for(var t,o=e.target.dataset.setting,r=JSON.parse(JSON.stringify(u)),n=ce(u.entries());!(t=n()).done;){var i=t.value,a=i[0],l=i[1];o===l.setting&&(r[a].showAllColors=!l.showAllColors)}v(r)},T=function(e){var t=e.currentTarget.dataset,o=t.setting,r=t.value,n=JSON.parse(JSON.stringify(h));switch(o){case"style":n[o]=r,d(n);break;case"symbol":n[o]=r===h[o]?"":r,d(n);break;case"rotateAngle":n[o]="rotateRight"===r?h[o]+45:h[o]-45,d(n);break;case"tileStyle.marginX":var i=o.split("."),a=i[0],l=i[1];n[a][l]="marginX_more"===r?h[a][l]+10:h[a][l]-10,d(n);break;case"tileStyle.marginY":var s=o.split("."),c=s[0],g=s[1];n[c][g]="marginY_more"===r?h[c][g]+10:h[c][g]-10,d(n);break;case"font.fontWeight":var b=o.split("."),u=b[0],v=b[1];n[u][v]="normal"===h[u][v]?"bold":"normal",d(n);break;case"font.fontStyle":var m=o.split("."),x=m[0],f=m[1];n[x][f]="normal"===h[x][f]?"italic":"normal",d(n);break;case"singleStyle.position":var y=o.split("."),p=y[0],k=y[1];n[p][k]=r,d(n);break;case"curvedStyle.curvedMargin":var T=o.split("."),w=T[0],S=T[1];n[w][S]="curvedMargin_more"===r?h[w][S]+10:h[w][S]-10,d(n);break;case"curvedStyle.curvedAngle":var O=o.split("."),W=O[0],D=O[1];n[W][D]="curvedAngle_more"===r?h[W][D]+10:h[W][D]-10,d(n);break;case"curvedStyle.curvedRadius":var j=o.split("."),M=j[0],C=j[1];n[M][C]="curvedRadius_more"===r?h[M][C]+10:h[M][C]-10,d(n);break;default:var R=o.split("."),A=R[0],N=R[1];n[A][N]=!h[A][N],d(n)}},w=function(e){"Enter"!==e.key&&"enter"!==e.key||T(e)},S=function(e){"Enter"!==e.key&&"enter"!==e.key||p(e)},O=function(e){"Enter"!==e.key&&"enter"!==e.key||k(e)};return Object(n.useEffect)((function(){var e=document.getElementById("canvas"),o=e.getContext("2d"),r=new Image;r.src=t.url,r.onload=function(){o.save(),o.fillStyle="#ffffff",o.fillRect(0,0,e.width,e.height),o.drawImage(r,0,0,t.width,t.height,0,0,e.width,e.height),o.restore(),m()}})),Object(a.b)(i.a,null,Object(a.b)(l.a,null,Object(a.b)("title",null,"图片加水印 | 证件加水印 | 超级水印"),Object(a.b)("meta",{name:"description",content:"给图片加水印, 给证件加水印, 发朋友圈加水印, 支持多种水印效果, 拥有丰富的可自定义的样式, 完全离线运行, 充分保护你的隐私."})),Object(a.b)("h1",{css:be},"图片加水印"),Object(a.b)("p",null,"给图片加水印, 给证件加水印, 发朋友圈加水印, 支持多种水印效果, 拥有丰富的可自定义的样式, 完全离线运行, 充分保护你的隐私. 手机建议使用对应的",Object(a.b)("b",null,"微信小程序「超级水印」"),"."),Object(a.b)("section",{css:ue},Object(a.b)("div",{id:"canvasContainer"},Object(a.b)("div",{className:"scroll-div"},Object(a.b)("canvas",{id:"canvas",type:"2d",width:"0",height:"0"}))),Object(a.b)("div",{className:"image-info",style:{display:t.width?"":"none"}},"分辨率: ",t.width,"px * ",t.height,"px | 体积: ",t.size)),Object(a.b)("section",{css:ve},Object(a.b)("div",{css:me},Object(a.b)("div",{className:"chooseImageBtn button"},Object(a.b)("label",{htmlFor:"input-file"},Object(a.b)("input",{id:"input-file",type:"file",multiple:!0,accept:"image/*",onChange:function(e){var t=e.target.files[0],r=URL.createObjectURL(t),n=function(){var e=t.size,o=Number((e/1024/1024).toFixed(2)),r=Number((e/1024).toFixed(2));return o>1?o+"MB":r+"KB"}(),i=new Image;i.src=r,i.onload=function(){var e=window.devicePixelRatio,r={width:i.width,height:i.height,url:i.src,name:t.name,size:n,type:t.type};o(r);var a=document.getElementById("canvas"),l=a.getContext("2d");a.width=r.width,a.height=r.height;var s=document.getElementById("canvasContainer").getBoundingClientRect();if(r.width<=s.width*e&&r.height<=500*e)a.style.width=Math.round(r.width/e)+"px",a.style.height=Math.round(r.height/e)+"px";else{var c=r.width/300,g=r.height/300;c>1&&g>1?c>g?(a.style.height="300px",a.style.width=Math.round(r.width/r.height*300)+"px"):(a.style.width="300px",a.style.height=Math.round(r.height/r.width*300)+"px"):(a.style.width=Math.round(r.width/e)+"px",a.style.height=Math.round(r.height/e)+"px")}l.drawImage(i,0,0,r.width,r.height,0,0,a.width,a.height),m()}},onClick:function(e){e.target.value=null}}),Object(a.b)("span",null,"选择图片"))),Object(a.b)("div",{className:"saveImageBtn button"},Object(a.b)("a",{download:!0,id:"download",href:"https://kejiweixun.com/merge-images/",role:"button",onClick:function(e){var t=document.getElementById("canvas"),o=document.getElementById("download");if(0===t.width)e.preventDefault();else{var r=t.toDataURL("image/jpeg");o.href=r}}},"保存图片"))),Object(a.b)("div",{css:xe},Object(a.b)("p",null,"输入水印:"),Object(a.b)("textarea",{type:"text",name:"inputWatermark",id:"inputText",onInput:function(e){e.persist(),x(e)},placeholder:"请输入水印, 可换行",rows:"1"})),Object(a.b)("div",{css:fe},Object(a.b)("p",null,"水印大小:"),Object(a.b)("input",{type:"range",name:"font.fontSize",id:"font.fontSize",onChange:y,min:"1",max:"500",defaultValue:h.font.fontSize}),Object(a.b)("p",null,h.font.fontSize,"px")),Object(a.b)("div",null,Object(a.b)("div",{css:ye},[{icon:"多",value:"tile"},{icon:"单",value:"single"},{icon:"弯",value:"curved"}].map((function(e){return Object(a.b)("div",{css:h.style===e.value?ke:pe,onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":"style","data-value":e.value},e.icon)}))),we.map((function(e){return Object(a.b)("div",null,e.map((function(e){if(-1!==e.setting.indexOf(".show")){var t=e.setting.split("."),o=t[0],r=t[1];return Object(a.b)("div",{onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":e.setting,"data-value":e.value,css:!0===h[o][r]?ke:pe,style:{display:-1!==e.belongTo.indexOf(h.style)||"all"===e.belongTo?"inline-block":"none"}},Object(a.b)("img",{src:e.icon,style:{width:"1.1rem",height:"1.1rem"},alt:e.setting}))}if(["font.fontWeight","font.fontStyle"].includes(e.setting)){var n=e.setting.split("."),i=n[0],l=n[1];return Object(a.b)("div",{onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":e.setting,"data-value":e.value,css:"normal"===h[i][l]?pe:ke,style:{display:-1!==e.belongTo.indexOf(h.style)||"all"===e.belongTo?"inline-block":"none"}},Object(a.b)("img",{src:e.icon,style:{width:"1.1rem",height:"1.1rem"},alt:e.setting}))}if("singleStyle.position"===e.setting){var s=e.setting.split("."),c=s[0],g=s[1];return Object(a.b)("div",{onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":e.setting,"data-value":e.value,css:h[c][g]===e.value?ke:pe,style:{display:-1!==e.belongTo.indexOf(h.style)||"all"===e.belongTo?"inline-block":"none"}},Object(a.b)("img",{src:e.icon,style:{width:"1.1rem",height:"1.1rem"},alt:e.setting}))}return Object(a.b)("div",{onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":e.setting,"data-value":e.value,css:pe,style:{display:-1!==e.belongTo.indexOf(h.style)||"all"===e.belongTo?"inline-block":"none"}},Object(a.b)("img",{src:e.icon,style:{width:"1.1rem",height:"1.1rem"},alt:e.setting}))})))})),Object(a.b)("div",{css:ye},["©","™","®","℠"].map((function(e){return Object(a.b)("div",{css:h.symbol===e?ke:pe,onClick:T,onKeyDown:w,tabindex:"0",role:"button","data-setting":"symbol","data-value":e},e)})))),Object(a.b)("div",{css:Te},u.map((function(e){return Object(a.b)("div",{style:{display:h[e.setting].show||"font"===e.setting?"":"none"}},Object(a.b)("p",null,e.name,":"),Object(a.b)("div",{className:"opacityAndLineWidth"},Object(a.b)("div",null,Object(a.b)("p",null,"透明度:"),Object(a.b)("input",{type:"range",id:e.setting,name:e.setting+".opacity",min:"0",max:"1",step:"0.1",defaultValue:h[e.setting].opacity,onChange:y}),Object(a.b)("p",null,h[e.setting].opacity)),Object(a.b)("div",{style:{display:h[e.setting].lineWidth?"":"none"}},Object(a.b)("p",null,"线条宽度:"),Object(a.b)("input",{type:"range",id:e.setting,name:e.setting+".lineWidth",min:"1",max:"500",defaultValue:h[e.setting].lineWidth,onChange:y}),Object(a.b)("p",null,h[e.setting].lineWidth))),Object(a.b)("div",{className:"color-grid",style:{display:e.showAllColors?"none":""}},de.map((function(t){return"transparent"===t?Object(a.b)("div",{style:{display:"inline-block",backgroundColor:t},"data-value":t,onClick:p,onKeyDown:S,tabindex:"0",role:"button",className:"one-color","data-setting":e.setting},Object(a.b)("img",{src:ae.a,className:"one-color",alt:"transparent icon"})):Object(a.b)("span",{className:"one-color",style:{display:"inline-block",backgroundColor:t},"data-value":t,onClick:p,onKeyDown:S,tabindex:"0",role:"button","data-setting":e.setting},h[e.setting].color.replace(/[^,]+(?=\))/g,1)===t?"x":"")})),Object(a.b)("span",{className:"more-color",onClick:k,onKeyDown:O,tabindex:"0",role:"button","data-setting":e.setting},"更多颜色")),Object(a.b)("div",{className:"color-grid",style:{display:e.showAllColors?"":"none"}},he.map((function(t){return"transparent"===t?Object(a.b)("div",{style:{display:"inline-block",backgroundColor:t},"data-value":t,onClick:p,onKeyDown:S,tabindex:"0",role:"button",className:"one-color","data-setting":e.setting},Object(a.b)("img",{src:ae.a,className:"one-color",alt:"transparent icon"})):Object(a.b)("span",{className:"one-color",style:{display:"inline-block",backgroundColor:t},"data-value":t,onClick:p,onKeyDown:S,tabindex:"0",role:"button","data-setting":e.setting},h[e.setting].color.replace(/[^,]+(?=\))/g,1)===t?"x":"")})),Object(a.b)("span",{className:"more-color",onClick:k,onKeyDown:O,tabindex:"0",role:"button","data-setting":e.setting},"隐藏颜色")))})))),Object(a.b)(s.a,{title:"图片拼接",slug:"add-watermark/"}))}}}]);
//# sourceMappingURL=efff2b31-360051ab0ee54982ee26.js.map