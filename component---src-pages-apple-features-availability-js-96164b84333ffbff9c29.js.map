{"version":3,"sources":["webpack:///./src/pages/apple-features-availability.js"],"names":["hStyle","formStyle","featuresStyle","Features","useState","checked","setChecked","allDevicesFeatures","setAllDevicesFeatures","features","setFeatures","device","setDevices","devices","useEffect","a","alliPhoneFeatures","fetch","then","res","json","allWatchFeatures","allMacFeatures","Promise","all","allFeatures","getAllDevicesFeatures","deviceTweaked","unavailable","getFeatures","deviceFeatures","featuresCount","unavailableCount","inputEle","map","key","type","name","value","id","defaultChecked","htmlFor","content","css","onChange","e","target","Number","className","mainLandFeatures","available","length","item","feature","remark","title","slug"],"mappings":"yNAOA,IAAMA,EAAM,qGAMNC,EAAS,uUA2BTC,EAAa,wUAoLJC,UAzJE,WAAO,IAAD,EACSC,oBAAS,GAAhCC,EADc,KACLC,EADK,OAE+BF,qBAA7CG,EAFc,KAEMC,EAFN,OAGWJ,qBAAzBK,EAHc,KAGJC,EAHI,OAIQN,mBAAS,eAA/BO,EAJc,KAINC,EAJM,KAKfC,EAAU,CACd,CAAEF,OAAQ,cAAeN,QAAS,CAAEA,YACpC,CAAEM,OAAQ,eACV,CAAEA,OAAQ,QAIZG,qBAAU,YACmB,uCAAG,kCAAAC,EAAA,6DACtBC,EAAoBC,MAAM,iDAG9BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UACZC,EAAmBJ,MAAM,gDAG7BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UACZE,EAAiBL,MAAM,8CAG3BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAZU,SAaFG,QAAQC,IAAI,CACpCR,EACAK,EACAC,IAhB0B,OAatBG,EAbsB,OAkB5BjB,EAAsB,CACpBQ,kBAAmBS,EAAY,GAC/BJ,iBAAkBI,EAAY,GAC9BH,eAAgBG,EAAY,KArBF,2CAAH,qDAwB3BC,KACC,IAEHZ,qBAAU,WACR,IAAMa,EACO,gBAAXhB,EACI,oBACW,QAAXA,EACE,iBACA,mBACJJ,GACe,uCAAG,sBAAAQ,EAAA,sDACdR,EAAmBoB,GACrBjB,EAAYH,EAAmBoB,IAE/BjB,EAAY,CACVD,SAAU,CAAC,KACXmB,YAAa,CAAC,OANA,2CAAH,oDAUjBC,KAED,CAAClB,EAAQJ,IAEZ,IAuBQuB,EACAC,EAKAC,EA7BFC,EAAWpB,EAAQqB,KAAI,SAAAvB,GAC3B,OACE,iBAAGwB,IAAKxB,EAAOA,QACb,qBACEyB,KAAK,QACLC,KAAK,SACLC,MAAO3B,EAAOA,OACd4B,GAAI5B,EAAOA,OACX6B,eAAgB7B,EAAON,UAEzB,qBAAOoC,QAAS9B,EAAOA,QAASA,EAAOA,YAyD7C,OACE,YAAC,IAAD,KACE,YAAC,IAAD,KACE,2DACA,oBACE0B,KAAK,cACLK,QAAQ,+EAGZ,0BACE,kBAAIC,IAAK3C,GAAT,WACA,oBAAM2C,IAAK1C,EAAW2C,SA/DP,SAAAC,GACnBjC,EAAWiC,EAAEC,OAAOR,OACW,gBAA3BS,OAAOF,EAAEC,OAAOR,QAClBhC,GAAW,KA6DP,4BACE,oCACA,mBAAK0C,UAAU,kBAAkBf,MAIvC,uBAASU,IAAKzC,IA9DV4B,EAAiBrB,GAAsBwC,EAAiBtC,GACxDoB,EAEF,MADFD,EAAeoB,UAAU,GAErB,EACApB,EAAeoB,UAAUC,OACzBnB,EAEF,MADFF,EAAeF,YAAY,GAEvB,EACAE,EAAeF,YAAYuB,OAE/B,8BACE,sBACE,oBAAMH,UAAU,cAzFR,QA0FR,oBAAMA,UAAU,aAAarC,IAE/B,uBAASqC,UAAU,gBACjB,2BACE,+BAAcjB,EAAd,QACA,sBACGD,EAAeoB,UAAUhB,KAAI,SAAAkB,GAC5B,OAAO,kBAAIjB,IAAKiB,EAAKC,SACnB,uBAAMD,EAAKC,SACX,mBAAKL,UAAU,kBAAkBI,EAAKE,cAK9C,2BACE,gCAAetB,EAAf,QACA,sBACGF,EAAeF,YAAYM,KAAI,SAAAkB,GAC9B,OAAO,kBAAIjB,IAAKiB,EAAKC,SACnB,uBAAMD,EAAKC,mBA6BvB,YAAC,IAAD,CAAME,MAAM,YAAYC,KAAK,qC","file":"component---src-pages-apple-features-availability-js-96164b84333ffbff9c29.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport Helmet from \"react-helmet\"\nimport Layout from \"../component/layout\"\nimport ISSO from \"../component/comment\"\nimport { css } from \"@emotion/core\"\nimport mainLandFeatures from \"../../static/features.json\"\n\nconst hStyle = css`\nfont-size: clamp(1.3rem, 1vw + 1.3rem, 1.8rem);\ntext-align: center;\nmargin: 1em 0;\n`\n\nconst formStyle = css`\n  margin: 0 0 0.5rem 0;\n  padding: 0;\n  fieldset {\n    border: 1px solid grey;\n  }\n  fieldset legend {\n    background-color: black;\n    color: white;\n    padding: 4px 1rem;\n    font-size: 0.9rem;\n    font-weight: bold;\n  }\n  .systemSelector {\n    display: flex;\n    flex-wrap: wrap;\n    p {\n      display: flex;\n      align-items: center;\n      margin: 0.3rem 1rem 0.3rem 0;\n    }\n    p label {\n      margin-left: 0.3rem;\n    }\n  }\n`\n\nconst featuresStyle = css`\n  margin-bottom: 1rem;\n  h2 {\n    font-size: 1.3rem;\n    margin: 2rem 0;\n  }\n  .h2-country {\n    color: white;\n    border: 1px solid black;\n    background: black;\n    padding: 0.2rem 0.4rem;\n  }\n  .h2-device {\n    border: 1px solid black;\n    padding: 0.2rem 0.4rem;\n  }\n  .all-features {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .feature-remark {\n    font-size: 0.8rem;\n    color: grey;\n  }\n`\n\nconst Features = () => {\n  const [checked, setChecked] = useState(true)\n  const [allDevicesFeatures, setAllDevicesFeatures] = useState()\n  const [features, setFeatures] = useState()\n  const [device, setDevices] = useState(\"iPhone/iPad\")\n  const devices = [\n    { device: \"iPhone/iPad\", checked: { checked } },\n    { device: \"Apple Watch\" },\n    { device: \"Mac\" },\n  ]\n  const country = '中国大陆';\n\n  useEffect(() => {\n    const getAllDevicesFeatures = async () => {\n      const alliPhoneFeatures = fetch(\n        `https://api.kejiweixun.com/api/feature_iphone`\n        // 'http://localhost:3000/api/feature_iphone'\n      ).then(res => res.json())\n      const allWatchFeatures = fetch(\n        `https://api.kejiweixun.com/api/feature_watch`\n        // 'http://localhost:3000/api/feature_watch'\n      ).then(res => res.json())\n      const allMacFeatures = fetch(\n        `https://api.kejiweixun.com/api/feature_mac`\n        // 'http://localhost:3000/api/feature_mac'\n      ).then(res => res.json())\n      const allFeatures = await Promise.all([\n        alliPhoneFeatures,\n        allWatchFeatures,\n        allMacFeatures,\n      ])\n      setAllDevicesFeatures({\n        alliPhoneFeatures: allFeatures[0],\n        allWatchFeatures: allFeatures[1],\n        allMacFeatures: allFeatures[2],\n      })\n    }\n    getAllDevicesFeatures()\n  }, [])\n\n  useEffect(() => {\n    const deviceTweaked =\n      device === \"iPhone/iPad\"\n        ? \"alliPhoneFeatures\"\n        : device === \"Mac\"\n          ? \"allMacFeatures\"\n          : \"allWatchFeatures\"\n    if (allDevicesFeatures) {\n      const getFeatures = async () => {\n        if (allDevicesFeatures[deviceTweaked]) {\n          setFeatures(allDevicesFeatures[deviceTweaked])\n        } else {\n          setFeatures({\n            features: [\"无\"],\n            unavailable: [\"无\"],\n          })\n        }\n      }\n      getFeatures()\n    }\n  }, [device, allDevicesFeatures])\n\n  const inputEle = devices.map(device => {\n    return (\n      <p key={device.device}>\n        <input\n          type=\"radio\"\n          name=\"device\"\n          value={device.device}\n          id={device.device}\n          defaultChecked={device.checked}\n        />\n        <label htmlFor={device.device}>{device.device}</label>\n      </p>\n    )\n  })\n\n  const handleChange = e => {\n    setDevices(e.target.value)\n    if (Number(e.target.value) !== \"iPhone/iPad\") {\n      setChecked(false)\n    }\n  }\n\n  const featuresListEle = () => {\n    const deviceFeatures = features ? features : mainLandFeatures[device]\n    const featuresCount =\n      deviceFeatures.available[0] ===\n        \"无\"\n        ? 0\n        : deviceFeatures.available.length\n    const unavailableCount =\n      deviceFeatures.unavailable[0] ===\n        \"无\"\n        ? 0\n        : deviceFeatures.unavailable.length\n    return (\n      <>\n        <h2>\n          <span className=\"h2-country\">{country}</span>\n          <span className=\"h2-device\">{device}</span>\n        </h2>\n        <article className=\"all-features\">\n          <section>\n            <h3>{`可用功能 (${featuresCount}个) :`}</h3>\n            <ul>\n              {deviceFeatures.available.map(item => {\n                return <li key={item.feature}>\n                  <div>{item.feature}</div>\n                  <div className=\"feature-remark\">{item.remark}</div>\n                </li>\n              })}\n            </ul>\n          </section>\n          <section>\n            <h3>{`不可用功能 (${unavailableCount}个) :`}</h3>\n            <ul>\n              {deviceFeatures.unavailable.map(item => {\n                return <li key={item.feature}>\n                  <div>{item.feature}</div>\n                </li>\n              })}\n            </ul>\n          </section>\n        </article>\n      </>\n    )\n  }\n\n  return (\n    <Layout>\n      <Helmet>\n        <title>iPhone, iPad, Watch, Mac 功能可用性</title>\n        <meta\n          name=\"description\"\n          content=\"中国大陆地区的 iOS, watchOS, macOS 功能可用性查询，查询国行 iPhone、Mac、Apple Watch 有哪些功能不可用。\"\n        />\n      </Helmet>\n      <header>\n        <h1 css={hStyle}>苹果功能可用性</h1>\n        <form css={formStyle} onChange={handleChange}>\n          <fieldset>\n            <legend>请选择设备:</legend>\n            <div className=\"systemSelector\">{inputEle}</div>\n          </fieldset>\n        </form>\n      </header>\n      <section css={featuresStyle}>{featuresListEle()}</section>\n      <ISSO title=\"苹果系统功能可用性\" slug=\"/apple-features-availability/\" />\n    </Layout >\n  )\n}\n\nexport default Features"],"sourceRoot":""}